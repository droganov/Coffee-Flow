// Generated by CoffeeScript 1.4.0
(function(){var e,t,n,r,i;r=function(e){if(i.debug)return typeof console!="undefined"&&console!==null?console.log(e):void 0};n=jQuery;i={blur:function(e){return r("CoffeeFlow blured")},change:function(e){return r("CoffeeFlow change")},ready:function(e){return r("CoffeeFlow ready")},select:function(e){return r("CoffeeFlow select")},focus:function(e){return r("CoffeeFlow focused")},borderWidth:1,debug:!1,density:3.2,defaultItem:2,minHeight:200,selectOnChange:!1};e=function(){function e(e,r){var s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E=this;u=n(e);i=n.extend(i,n.data(e));i=n.extend(i,r);v=this;y="";a=i.defaultItem;g=[];o=n('<div class="coffeeflowCanvas"></div>');h=u.find("a");this.getCanvas=function(){return o};this.getData=function(){return o.data()};this.getIndex=function(){return a};this.getItem=function(e){e==null&&(e=a);return g[e]};this.getWidth=function(){return o.width()};this.hasFocus=function(){return u.is(".coffeeflowFocuse")};this.resize=function(){var e;u.height()>i.minHeight?e=u.height():e=i.minHeight;o.height(e);return s()};this.slideTo=function(e){e>=g.length&&(e=g.length-1);e<0&&(e=0);a=e;s();i.change(v);if(i.selectOnChange)return g[e].select()};s=function(){var e,t,n,r,s,u,f;f=[];for(s=0,u=g.length;s<u;s++){t=g[s];t.resize();n=o.height()/i.density;if(s===a){y="current";e=g.length+1;r=o.width()/2}else if(s<a){y="before";e=s;r=o.width()/2-n/2-(a-s)*n}else{y="after";e=g.length-s;r=o.width()/2+n/2+(s-a)*n}t.setDepth(e);t.setState(y);f.push(t.moveTo(r))}return f};f=function(){return y};p=function(e){var t,n;if(E.hasFocus()){e=e||event;t=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));n=a+t;E.slideTo(n);return e.preventDefault?e.preventDefault():e.returnValue=!1}};d=function(){o.addClass("ready");E.resize();return i.ready(v)};m=function(e){return e=e};for(b=0,w=h.length;b<w;b++){l=h[b];c=new t(l,b,v);g.push(c);c.appendTo(o)}u.append(o);this.resize();n(window).resize(function(e){return E.resize()});u.mouseover(function(e){if(!u.is(".coffeeflowFocuse")){u.addClass("coffeeflowFocuse");E.resize();i.focus(v)}return e.stopPropagation()});n("html").mouseover(function(e){if(u.is(".coffeeflowFocuse")){u.removeClass("coffeeflowFocuse");E.resize();i.blur(v);return e.stopPropagation()}});if(window.addEventListener){window.addEventListener("mousewheel",p,!1);window.addEventListener("DOMMouseScroll",p,!1)}else window.attachEvent("onmousewheel",p);setTimeout(d,10)}typeof window!="undefined"&&window!==null&&(window.Coffeeflow=e);return e}();t=function(){function e(e,t,r){var s,o,u,a,f,l=this;f="";r=r;a=n(e).addClass("coffeeflowItem");o=a.find("img");a.css({top:i.borderWidth+"px"});o.css({"border-width":i.borderWidth+"px",margin:-i.borderWidth+"px"});o.load(function(e){return s()});a.click(function(e){e.preventDefault();return a.is(".current")?u():r.slideTo(t)});this.appendTo=function(e){return a.appendTo(e)};this.setDepth=function(e){return a.css("z-index",e)};this.setState=function(e){a.removeClass("before");a.removeClass("current");a.removeClass("after");e!=="current"&&a.removeClass("selected");a.addClass(e);f=e;return s()};this.moveTo=function(e){var t;e-=a.width()/2;t=!0;switch(f){case"before":t=e>0-a.width();break;case"after":t=e<0+r.getWidth()}t?a.show():a.hide();return a.css({left:e+"px"})};this.resize=function(){var e;e=r.getCanvas().height()-i.borderWidth*2;return a.height(e).width(e)};s=function(){switch(f){case"current":return o.css({left:(a.height()-o.width())/2+"px"});case"before":return o.css({left:0});case"after":return o.css({right:0})}};u=function(){a.addClass("selected");return i.select(r)}}return e}()}).call(this);